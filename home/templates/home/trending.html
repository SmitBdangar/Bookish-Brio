{% extends "home/base.html" %}

{% block title %}Trending Posts - Bookish Brio{% endblock %}

{% block extra_css %}
<style>
    .trending-header {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 4px;
        padding: 24px;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 16px;
    }

    .trending-icon {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        background: #ff4500;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
    }

    .trending-title h1 {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 4px;
    }

    .trending-title p {
        font-size: 0.9rem;
        color: var(--text-meta);
    }

    .rank-badge {
        background: #edeff1;
        color: #1c1c1c;
        padding: 2px 8px;
        border-radius: 999px;
        font-size: 0.75rem;
        font-weight: 700;
        margin-right: 8px;
    }
</style>
{% endblock %}

{% block content %}
<div class="trending-header">
    <div class="trending-icon"><i class="fas fa-fire"></i></div>
    <div class="trending-title">
        <h1>Trending Today</h1>
        <p>The most active posts in the community</p>
    </div>
</div>

<section class="posts-feed">
    {% for post in posts %}
    <article class="post-card" onclick="window.location.href='{% url 'post_detail' post.pk %}'">
        <div class="post-main">
            <div class="post-meta">
                <span class="rank-badge">#{{ forloop.counter }}</span>
                <a href="{% url 'public_profile' post.author.username %}" class="post-author"
                    onclick="event.stopPropagation();">
                    u/{{ post.author.username }}
                </a>
                <span>â€¢</span>
                <span>{{ post.created_at|timesince }} ago</span>
            </div>

            <h2 class="post-title">{{ post.title }}</h2>

            <div class="post-content-preview"
                style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                {{ post.preview_content }}
            </div>

            <div class="post-actions" style="margin-top: 12px;">
                <div class="action-btn">
                    <i class="fas fa-fire" style="color: var(--primary);"></i>
                    <span>{{ post.like_count|add:post.comment_count }} engagements</span>
                </div>
                <div class="action-btn">
                    <i class="far fa-comment"></i>
                    <span>{{ post.comment_count }}</span>
                </div>
            </div>
        </div>
    </article>
    {% empty %}
    <div
        style="background: white; padding: 60px; text-align: center; border-radius: 4px; border: 1px solid var(--border);">
        <i class="fas fa-ghost fa-3x" style="margin-bottom: 16px; opacity: 0.2;"></i>
        <p>It's quiet here... for now.</p>
    </div>
    {% endfor %}
</section>
{% endblock %}